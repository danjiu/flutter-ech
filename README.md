# ECH VPN for iOS

åŸºäº Cloudflare Workers ECH æŠ€æœ¯çš„å®‰å…¨ VPN å®¢æˆ·ç«¯ï¼Œä¸º iOS è®¾å¤‡æä¾›éšç§ä¿æŠ¤ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ›¡ï¸ éšç§ä¿æŠ¤
- **ECH åŠ å¯†** - ä½¿ç”¨ TLS 1.3 ECH æŠ€æœ¯åŠ å¯† SNI ä¿¡æ¯
- **é›¶æ—¥å¿—ç­–ç•¥** - ä¸è®°å½•ç”¨æˆ·çš„æµè§ˆå†å²å’Œä¼ è¾“å†…å®¹
- **æœ¬åœ°å­˜å‚¨** - æ‰€æœ‰é…ç½®æ•°æ®éƒ½å­˜å‚¨åœ¨æœ¬åœ°è®¾å¤‡ä¸Š

### ğŸš€ é«˜æ€§èƒ½
- **æ™ºèƒ½åˆ†æµ** - æ”¯æŒå…¨å±€ä»£ç†ã€è·³è¿‡ä¸­å›½å¤§é™†ã€ç›´è¿ä¸‰ç§æ¨¡å¼
- **è‡ªåŠ¨ä¼˜åŒ–** - è‡ªåŠ¨é€‰æ‹©æœ€ä½³è·¯ç”±
- **å®æ—¶ç»Ÿè®¡** - æ˜¾ç¤ºè¿æ¥æ—¶é•¿ã€æµé‡ä½¿ç”¨ç­‰ä¿¡æ¯

### ğŸ“± ç”¨æˆ·å‹å¥½
- **ç®€æ´ç•Œé¢** - Material Design é£ç•Œï¼Œæ“ä½œç®€å•
- **å¤šæœåŠ¡å™¨ç®¡ç†** - æ”¯æŒæ·»åŠ ã€ç¼–è¾‘å¤šä¸ªæœåŠ¡å™¨é…ç½®
- **ä¸€é”®è¿æ¥** - å¿«é€Ÿè¿æ¥å¸¸ç”¨æœåŠ¡å™¨

## æŠ€æœ¯æ¶æ„

- **Flutter/Dart** - å®Œæ•´çš„è·¨å¹³å°å®ç°
- **flutter_vpn** - iOS VPN ç³»ç»Ÿé›†æˆ
- **SOCKS5 ä»£ç†** - çº¯Dartå®ç°çš„æœ¬åœ°ä»£ç†æœåŠ¡å™¨
- **ECH æ”¯æŒ** - TLS 1.3 ECH é…ç½®è·å–
- **æ™ºèƒ½åˆ†æµ** - ä¸­å›½IPæ•°æ®åº“å’Œè·¯ç”±è§„åˆ™

## å¼€å‘ç¯å¢ƒè®¾ç½®

### ä½¿ç”¨ GitHub Codespaces

1. Fork æœ¬ä»“åº“åˆ°ä½ çš„ GitHub è´¦æˆ·
2. ç‚¹å‡» "Code" æŒ‰é’®ï¼Œé€‰æ‹© "Codespaces"
3. åˆ›å»ºæ–°çš„ Codespace

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

1. å®‰è£… Flutter SDK 3.24.0+
2. å®‰è£… Xcode 15.0+ (ä»… iOS)
3. å…‹éš†ä»“åº“ï¼š
   ```bash
   git clone https://github.com/yourusername/ech-flutter-vpn.git
   cd ech-flutter-vpn
   ```
4. å®‰è£…ä¾èµ–ï¼š
   ```bash
   flutter pub get
   cd ios && pod install
   ```
5. è¿è¡Œåº”ç”¨ï¼š
   ```bash
   flutter run
   ```

## é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ main.dart              # åº”ç”¨å…¥å£
â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ server_config.dart
â”‚   â”œâ”€â”€ vpn_state.dart
â”‚   â””â”€â”€ connection_stats.dart
â”œâ”€â”€ services/             # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ vpn_service.dart
â”‚   â””â”€â”€ storage_service.dart
â”œâ”€â”€ screens/              # é¡µé¢
â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”œâ”€â”€ server_config_screen.dart
â”‚   â”œâ”€â”€ settings_screen.dart
â”‚   â””â”€â”€ history_screen.dart
â”œâ”€â”€ widgets/              # ç»„ä»¶
â”‚   â”œâ”€â”€ connection_status_card.dart
â”‚   â”œâ”€â”€ server_selector.dart
â”‚   â””â”€â”€ quick_connect_button.dart
â”œâ”€â”€ core/                 # æ ¸å¿ƒåŠŸèƒ½å®ç°
â”‚   â”œâ”€â”€ ech_client.dart       # ECHé…ç½®è·å–
â”‚   â”œâ”€â”€ socks5_server.dart    # SOCKS5ä»£ç†æœåŠ¡å™¨
â”‚   â”œâ”€â”€ proxy_server.dart     # æ•´åˆçš„ä»£ç†æœåŠ¡å™¨
â”‚   â””â”€â”€ china_ip_database.dart # ä¸­å›½IPæ•°æ®åº“
â””â”€â”€ utils/                # å·¥å…·ç±»
    â””â”€â”€ logger.dart

ios/
â”œâ”€â”€ Runner/               # iOSåº”ç”¨
â””â”€â”€ ExportOptions.plist   # å¯¼å‡ºé…ç½®
assets/
â””â”€â”€ config/              # IPåœ°å€åˆ—è¡¨
    â”œâ”€â”€ chn_ip.txt       # ä¸­å›½IPv4åˆ—è¡¨
    â””â”€â”€ chn_ip_v6.txt     # ä¸­å›½IPv6åˆ—è¡¨
```

## æ„å»ºå’Œå‘å¸ƒ

### ä½¿ç”¨ Codemagic CI/CD

é¡¹ç›®å·²é…ç½® Codemagic è‡ªåŠ¨æ„å»ºæµç¨‹ï¼š

1. **æµ‹è¯•å’Œåˆ†æ** - æ¯æ¬¡æ¨é€å’Œ PR æ—¶è‡ªåŠ¨è¿è¡Œ
2. **é¢„è§ˆæ„å»º** - PR æ—¶ç”Ÿæˆæµ‹è¯•ç‰ˆæœ¬
3. **å‘å¸ƒæ„å»º** - æ¨é€åˆ° main åˆ†æ”¯æ—¶æ„å»ºç”Ÿäº§ç‰ˆæœ¬

### æ‰‹åŠ¨æ„å»º

#### iOS

1. é…ç½®å¼€å‘è€…è´¦å·å’Œè¯ä¹¦
2. æ›´æ–° `ios/ExportOptions.plist` ä¸­çš„å›¢é˜Ÿ ID
3. è¿è¡Œæ„å»ºå‘½ä»¤ï¼š
   ```bash
   flutter build ios --release
   ```

#### Android

```bash
flutter build apk --release
flutter build appbundle --release
```

## é…ç½®è¯´æ˜

### æœåŠ¡å™¨é…ç½®

1. åœ¨åº”ç”¨ä¸­ç‚¹å‡»"æ·»åŠ æœåŠ¡å™¨"
2. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **æœåŠ¡å™¨åç§°** - è‡ªå®šä¹‰åç§°
   - **æœåŠ¡å™¨åœ°å€** - Cloudflare Workers åœ°å€
   - **ç«¯å£** - é»˜è®¤ 443
   - **è®¿é—®ä»¤ç‰Œ** - å¯é€‰ï¼Œå¦‚æœè®¾ç½®äº†è®¤è¯
   - **è·¯ç”±æ¨¡å¼** - é€‰æ‹©åˆ†æµç­–ç•¥

### é«˜çº§è®¾ç½®

- **ä¼˜é€‰ IP** - æŒ‡å®šæœåŠ¡å™¨ IPï¼Œç»•è¿‡ DNS è§£æ
- **DoH æœåŠ¡å™¨** - è‡ªå®šä¹‰ DNS over HTTPS æœåŠ¡å™¨
- **ECH åŸŸå** - ç”¨äºè·å– ECH é…ç½®çš„åŸŸå

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ— æ³•è¿æ¥ VPN**
   - æ£€æŸ¥æœåŠ¡å™¨åœ°å€æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
   - æŸ¥çœ‹ VPN æ—¥å¿—

2. **è¿æ¥é€Ÿåº¦æ…¢**
   - å°è¯•ä½¿ç”¨"ä¼˜é€‰ IP"åŠŸèƒ½
   - åˆ‡æ¢åˆ°ä¸åŒçš„ DoH æœåŠ¡å™¨
   - é€‰æ‹©åˆé€‚çš„è·¯ç”±æ¨¡å¼

3. **iOS æƒé™é—®é¢˜**
   - ç¡®ä¿å·²æˆäºˆ VPN æƒé™
   - æ£€æŸ¥æè¿°æ–‡ä»¶æ˜¯å¦æœ‰æ•ˆ

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è‡´è°¢

- [ech-wk](https://github.com/byJoey/ech-wk) - æ ¸å¿ƒä»£ç†åŠŸèƒ½
- [Flutter](https://flutter.dev/) - UI æ¡†æ¶
- [Cloudflare Workers](https://workers.cloudflare.com/) - è¾¹ç¼˜è®¡ç®—å¹³å°

## éšç§æ”¿ç­–

æœ¬åº”ç”¨ä¸¥æ ¼ä¿æŠ¤ç”¨æˆ·éšç§ï¼š

- ä¸æ”¶é›†ä¸ªäººèº«ä»½ä¿¡æ¯
- ä¸è®°å½•æµè§ˆå†å²
- æ‰€æœ‰æ•°æ®æœ¬åœ°å­˜å‚¨
- å¼€æºä»£ç ï¼Œé€æ˜å¯å®¡è®¡

å®Œæ•´éšç§æ”¿ç­–è¯·æŸ¥çœ‹ï¼š[éšç§æ”¿ç­–é¡µé¢](/privacy)

## è”ç³»æ–¹å¼

- Email: support@echvpn.com
- GitHub: https://github.com/yourusername/ech-flutter-vpn
- Telegram: https://t.me/echvpn

---

âš ï¸ **å…è´£å£°æ˜**: æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ã€‚
